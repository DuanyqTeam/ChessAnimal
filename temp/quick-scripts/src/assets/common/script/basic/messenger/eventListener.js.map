{"version":3,"sources":["../../../../../../../assets/common/script/basic/messenger/assets/common/script/basic/messenger/eventListener.js"],"names":["window","eventListener","oneToMultiListener","on","eventName","handler","target","handlerList","handlers","i","length","push","dispatch","data","len","call","e","console","error","off","oldHandler","oldTarget","splice","clear","create","newEventListener","Object"],"mappings":"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","sourceRoot":"../../../../../../../assets/common/script/basic/messenger","sourcesContent":["window.eventListener = {};\n\nvar oneToMultiListener = {};\n\noneToMultiListener.on = function(eventName, handler, target) {\n    var handlerList = this.handlers[eventName];\n    if (!handlerList) {\n        handlerList = [];\n        this.handlers[eventName] = handlerList;\n    }\n\n    for (var i = 0; i < handlerList.length; i++) {\n        if (!handlerList[i]) {\n            handlerList[i].handler = handler;\n            handlerList[i].target = target;\n            return i;\n        }\n    }\n\n    handlerList.push({handler: handler, target: target});\n    return handlerList.length;\n};\n\noneToMultiListener.dispatch = function(eventName, data) {\n    var handlerList = this.handlers[eventName];\n    if (!handlerList) {\n        return;\n    }\n\n    var len = handlerList.length;\n    for (var i = 0; i < len; i++) {\n        var handler = handlerList[i].handler;\n        var target = handlerList[i].target;\n        if (handler) {\n            try {\n                if (target) {\n                    handler.call(target, data);\n                } else {\n                    handler(data);\n                }\n            } catch (e) {\n                console.error(e);\n            }\n        }\n    }\n};\n\noneToMultiListener.off = function(eventName, handler, target) {\n    var handlerList = this.handlers[eventName];\n    if (!handlerList) {\n        return;\n    }\n\n    for (var i = 0; i < handlerList.length; i++) {\n        var oldHandler = handlerList[i].handler;\n        var oldTarget = handlerList[i].target;\n        if (oldHandler === handler && oldTarget === target) {\n            handlerList.splice(i, 1);\n            break;\n        }\n    }\n};\noneToMultiListener.clear = function(target) {\n    for (var eventName in this.handlers) {\n        var handlerList = this.handlers[eventName];\n        for (var i = 0; i < handlerList.length; i++) {\n            var oldTarget = handlerList[i].target;\n            if (oldTarget === target) {\n                handlerList.splice(i, 1);\n            }\n        }\n    }\n};\n\neventListener.create = function() {\n    var newEventListener = Object.create(oneToMultiListener);\n    newEventListener.handlers = {};\n    return newEventListener;\n};"]}