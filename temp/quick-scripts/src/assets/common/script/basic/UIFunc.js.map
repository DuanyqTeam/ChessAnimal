{"version":3,"sources":["../../../../../../assets/common/script/basic/assets/common/script/basic/UIFunc.js"],"names":["window","uiFunc","uiList","cacheUIList","openUI","uiName","callBack","i","length","temp","name","active","parent","cc","Canvas","instance","node","push","splice","panel","getComponent","show","clientEvent","dispatch","eventType","loader","loadRes","err","prefab","error","message","instantiate","closeUI","removeFromParent","hide","findUI"],"mappings":"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","sourceRoot":"../../../../../../assets/common/script/basic","sourcesContent":["/*\n    create by hao.c 2018/04/10\n\n    desc: 游戏显示相关操作逻辑\n */\n\nwindow.uiFunc = {\n    uiList: [],\n    cacheUIList: []\n};\n\nuiFunc.openUI = function(uiName, callBack) {\n    // 缓存--\n    for (var i = 0; i < uiFunc.cacheUIList.length; i++) {\n        var temp = uiFunc.cacheUIList[i];\n        if (temp && temp.name === uiName) {\n            temp.active = true;\n            temp.parent = cc.Canvas.instance.node;\n            uiFunc.uiList.push(temp)\n            uiFunc.cacheUIList.splice(i, 1);\n\n            var panel = temp.getComponent(\"uiPanel\");\n            if (panel) {\n                panel.show();\n            }\n\n            // event--\n            if (callBack) {\n                callBack(temp);\n            }\n            clientEvent.dispatch(clientEvent.eventType.openUI);\n            return;\n        }\n    }\n    // 非缓存--\n    cc.loader.loadRes('ui/' + uiName, function(err, prefab) {\n        if (err) {\n            cc.error(err.message || err);\n            return;\n        }\n\n        var temp = cc.instantiate(prefab);\n        temp.parent = cc.Canvas.instance.node;\n        uiFunc.uiList.push(temp)\n\n        var panel = temp.getComponent(\"uiPanel\");\n        if (panel) {\n            panel.show();\n        }\n\n        // event--\n        if (callBack) {\n            callBack(temp);\n        }\n        clientEvent.dispatch(clientEvent.eventType.openUI);\n    });\n};\n\nuiFunc.closeUI = function(uiName, callBack) {\n    for (var i = uiFunc.uiList.length - 1; i >= 0; i--) {\n        var temp = uiFunc.uiList[i];\n        if (temp && temp.name === uiName) {\n            temp.active = false;\n            temp.removeFromParent(true);\n            uiFunc.cacheUIList.push(temp);\n            uiFunc.uiList.splice(i, 1);\n\n            var panel = temp.getComponent(\"uiPanel\");\n            if (panel) {\n                panel.hide();\n            }\n\n            clientEvent.dispatch(clientEvent.eventType.closeUI);\n            if (callBack) {\n                callBack();\n            }\n            return;\n        }\n    }\n}\n\nuiFunc.findUI = function(uiName) {\n    for (var i = uiFunc.uiList.length - 1; i >= 0; i--) {\n        var temp = uiFunc.uiList[i];\n        if (temp && temp.name === uiName) {\n            return temp;\n        }\n    }\n}\n"]}