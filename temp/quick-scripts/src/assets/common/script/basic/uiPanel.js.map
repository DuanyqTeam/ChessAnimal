{"version":3,"sources":["../../../../../../assets/common/script/basic/assets/common/script/basic/uiPanel.js"],"names":["PanelAnimation","cc","Enum","None","ScaleAndAlpha","Class","Component","properties","showAnimation","type","hideAnimation","isUseMask","onLoad","nodeDict","linkWidget","self","children","i","length","widgetName","name","indexOf","nodeName","substring","error","childrenCount","bind","node","anim","getComponent","Animation","addComponent","on","showCompleted","show","active","clipName","addClip","dataFunc","uiPanelAnimationClips","play","console","log","hide","clientEvent","clear","onDestroy","off"],"mappings":"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","sourceRoot":"../../../../../../assets/common/script/basic","sourcesContent":["var PanelAnimation = cc.Enum({\n    None: -1,\n    ScaleAndAlpha: -1\n});\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        showAnimation: {\n            default: PanelAnimation.None,\n            type: PanelAnimation\n        },\n        hideAnimation: {\n            default: PanelAnimation.None,\n            type: PanelAnimation\n        },\n        isUseMask: false\n    },\n\n    onLoad: function() {\n        // node load --\n        this.nodeDict = {};\n\n        var linkWidget = function(self, nodeDict) {\n            var children = self.children;\n            for (var i = 0; i < children.length; i++) {\n                var widgetName = children[i].name;\n                if (widgetName && widgetName.indexOf(\"key_\") >= 0) {\n                    var nodeName = widgetName.substring(4);\n                    if (nodeDict[nodeName]) {\n                        cc.error(\"控件名字重复!\" + children[i].name);\n                    }\n                    nodeDict[nodeName] = children[i];\n                }\n                if (children[i].childrenCount > 0) {\n                    linkWidget(children[i], nodeDict);\n                }\n            }\n        }.bind(this);\n        linkWidget(this.node, this.nodeDict);\n\n        // 添加动画--\n        if (!this.showAnimation || !this.hideAnimation) {\n            this.anim = this.getComponent(cc.Animation);\n            if (!this.anim) {\n                this.anim = this.addComponent(cc.Animation);\n            }\n            this.anim.on('finished', this.showCompleted, this);\n        }\n    },\n\n    show: function() {\n        if (this.showAnimation === PanelAnimation.None) {\n            this.node.active = true;\n        } else {\n            var clipName = PanelAnimation[this.showAnimation];\n            this.anim.addClip(dataFunc.uiPanelAnimationClips[clipName]);\n            this.anim.play(clipName);\n        }\n    },\n\n    showCompleted: function() {\n        console.log(this.node.name + \"动画播放完毕～\");\n    },\n\n    hide: function() {\n        if (this.hideAnimation === PanelAnimation.None) {\n            this.node.active = false;\n        } else {\n            var clipName = PanelAnimation[this.hideAnimation];\n            this.anim.addClip(dataFunc.uiPanelAnimationClips[clipName]);\n            this.anim.play(clipName);\n        }\n        // 解除事件绑定--\n        clientEvent.clear(this);\n    },\n\n    onDestroy: function() {\n        if (this.anim) {\n            this.anim.off('finished', this.showCompleted, this);\n        }\n    },\n});\n"]}