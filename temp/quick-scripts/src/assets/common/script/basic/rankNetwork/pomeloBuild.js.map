{"version":3,"sources":["../../../../../../../assets/common/script/basic/rankNetwork/assets/common/script/basic/rankNetwork/pomeloBuild.js"],"names":["has","Object","prototype","hasOwnProperty","pomeloBuild","cc","Class","onLoad","modules","aliases","requirePomelo","path","parent","orig","resolved","resolve","err","Error","module","exports","client","component","call","relative","charAt","slice","index","paths","i","length","resolvePath","normalize","curr","segs","split","pop","push","concat","join","register","definition","alias","from","to","p","lastIndexOf","arr","obj","selfPomelo","localrequirePomelo","c","exists","create","pomeloBuildObj","indexOf","Emitter","mixin","key","on","event","fn","_callbacks","once","self","off","apply","arguments","_off","removeListener","removeAllListeners","callbacks","splice","emit","args","len","listeners","hasListeners","ByteArray","global","Protocol","PKG_HEAD_BYTES","MSG_FLAG_BYTES","MSG_ROUTE_CODE_BYTES","MSG_ID_MAX_BYTES","MSG_ROUTE_LEN_BYTES","MSG_ROUTE_CODE_MAX","MSG_COMPRESS_ROUTE_MASK","MSG_TYPE_MASK","Package","Message","TYPE_HANDSHAKE","TYPE_HANDSHAKE_ACK","TYPE_HEARTBEAT","TYPE_DATA","TYPE_KICK","TYPE_REQUEST","TYPE_NOTIFY","TYPE_RESPONSE","TYPE_PUSH","strencode","str","byteArray","offset","charCode","charCodeAt","codes","j","_buffer","copyArray","strdecode","buffer","bytes","array","end","res","chunk","String","fromCharCode","encode","type","body","decode","id","compressRoute","route","msg","idBytes","msgHasId","caculateMsgIdBytes","msgLen","msgHasRoute","encodeMsgFlag","encodeMsgId","encodeMsgRoute","encodeMsgBody","bytesLen","byteLength","flag","byte","routeLen","bodyLen","dest","doffset","src","soffset","copy","Buffer","Uint8Array","Protobuf","init","opts","encoder","encoderProtos","decoder","decoderProtos","protobuf","constants","TYPES","uInt32","sInt32","int32","string","message","Util","util","isSimpleType","Codec","codec","ArrayBuffer","float32Array","Float32Array","float64Array","Float64Array","uInt8Array","encodeUInt32","n","parseInt","isNaN","result","tmp","next","Math","floor","encodeSInt32","abs","decodeUInt32","m","pow","decodeSInt32","encodeFloat","float","decodeFloat","encodeDouble","double","subarray","decodeDouble","encodeStr","code","encode2UTF8","decodeStr","codeLength","MsgEncoder","constant","protos","checkMsg","JSON","stringify","encodeMsg","name","proto","option","__messages","writeBytes","encodeTag","tag","encodeProp","encodeArray","value","tmpBuffer","MsgDecoder","setProtos","buf","decodeMsg","head","getHead","__tags","decodeProp","decodeArray","isFinish","peekHead","getBytes","peekBytes","pos","b","JS_WS_CLIENT_TYPE","JS_WS_CLIENT_VERSION","EventEmitter","RES_OK","RES_FAIL","RES_OLD_CLIENT","o","F","root","window","pomelo","socket","reqId","handlers","routeMap","heartbeatInterval","heartbeatTimeout","nextHeartbeatTimeout","gapThreshold","heartbeatId","heartbeatTimeoutId","handshakeCallback","handshakeBuffer","version","initCallback","params","cb","host","port","wsStr","url","user","initWebSocket","console","log","onopen","send","onmessage","processPackage","data","Date","now","onerror","warn","onclose","WebSocket","binaryType","disconnect","close","clearTimeout","request","sendMessage","notify","clearCallback","isConnecting","readyState","CONNECTING","isOpen","OPEN","isClosed","CLOSED","isClosing","CLOSING","dict","packet","handler","heartbeat","setTimeout","heartbeatTimeoutCb","gap","handshake","parse","handshakeInit","onData","deCompose","processMessage","onKick","info","reason","processMessageBatch","msgs","l","server","abbrs","sys","initData","protocol"],"mappings":"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","sourceRoot":"../../../../../../../assets/common/script/basic/rankNetwork","sourcesContent":["/**\n * pomelo helloworld lib/build/build.js\n */\n/**\n * hasOwnProperty.\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\nvar pomeloBuild = cc.Class({\n    onLoad: function () {\n        /**\n         * Registered modules.\n         */\n\n        this.modules = {};\n\n        /**\n         * Registered aliases.\n         */\n\n        this.aliases = {};\n    },\n\n    requirePomelo: function(path, parent, orig) {\n        var resolved = this.resolve(path);\n\n        // lookup failed\n        if (null === resolved) {\n            orig = orig || path;\n            parent = parent || 'root';\n            var err = new Error('Failed to requirePomelo \"' + orig + '\" from \"' + parent + '\"');\n            err.path = orig;\n            err.parent = parent;\n            err.requirePomelo = true;\n            throw err;\n        }\n\n        var module = this.modules[resolved];\n\n        // perform real requirePomelo()\n        // by invoking the module's\n        // registered function\n        if (!module.exports) {\n            module.exports = {};\n            module.client = module.component = true;\n            module.call(this, module.exports, this.relative(resolved), module);\n        }\n\n        return module.exports;\n    },\n\n    /**\n     * Resolve `path`.\n     *\n     * Lookup:\n     *\n     *   - PATH/index.js\n     *   - PATH.js\n     *   - PATH\n     *\n     * @param {String} path\n     * @return {String} path or null\n     * @api private\n     */\n\n    resolve: function (path) {\n        if (path.charAt(0) === '/') path = path.slice(1);\n        var index = path + '/index.js';\n\n        var paths = [\n            path,\n            path + '.js',\n            path + '.json',\n            path + '/index.js',\n            path + '/index.json'\n        ];\n\n        for (var i = 0; i < paths.length; i++) {\n            var resolvePath = paths[i];\n            if (has.call(this.modules, resolvePath)) return resolvePath;\n        }\n\n        if (has.call(this.aliases, index)) {\n            return this.aliases[index];\n        }\n    },\n\n    /**\n     * Normalize `path` relative to the current path.\n     *\n     * @param {String} curr\n     * @param {String} path\n     * @return {String}\n     * @api private\n     */\n\n    normalize: function (curr, path) {\n        var segs = [];\n\n        if ('.' !== path.charAt(0)) return path;\n\n        curr = curr.split('/');\n        path = path.split('/');\n\n        for (var i = 0; i < path.length; ++i) {\n            if ('..' === path[i]) {\n                curr.pop();\n            } else if ('.' !== path[i] && '' !== path[i]) {\n                segs.push(path[i]);\n            }\n        }\n\n        return curr.concat(segs).join('/');\n    },\n\n    /**\n     * Register module at `path` with callback `definition`.\n     *\n     * @param {String} path\n     * @param {Function} definition\n     * @api private\n     */\n\n    register: function (path, definition) {\n        this.modules[path] = definition;\n    },\n\n    /**\n     * Alias a module definition.\n     *\n     * @param {String} from\n     * @param {String} to\n     * @api private\n     */\n\n    alias: function (from, to) {\n        if (!has.call(this.modules, from)) {\n            throw new Error('Failed to alias \"' + from + '\", it does not exist');\n        }\n        this.aliases[to] = from;\n    },\n\n    /**\n     * Return a requirePomelo function relative to the `parent` path.\n     *\n     * @param {String} parent\n     * @return {Function}\n     * @api private\n     */\n\n    relative: function (parent) {\n        var p = this.normalize(parent, '..');\n\n        /**\n         * lastIndexOf helper.\n         */\n\n        function lastIndexOf(arr, obj) {\n            var i = arr.length;\n            while (i--) {\n                if (arr[i] === obj) return i;\n            }\n            return -1;\n        }\n\n        /**\n         * The relative requirePomelo() itself.\n         */\n\n        var selfPomelo = this;\n        function localrequirePomelo(path) {\n            var resolved = localrequirePomelo.resolve(path);\n            return selfPomelo.requirePomelo(resolved, parent, path);\n        }\n\n        /**\n         * Resolve relative to the parent.\n         */\n\n        localrequirePomelo.resolve = function (path) {\n            var c = path.charAt(0);\n            if ('/' === c) return path.slice(1);\n            if ('.' === c) return selfPomelo.normalize(p, path);\n\n            // resolve deps by returning\n            // the dep in the nearest \"deps\"\n            // directory\n            var segs = parent.split('/');\n            var i = lastIndexOf(segs, 'deps') + 1;\n            if (!i) i = 0;\n            path = segs.slice(0, i + 1).join('/') + '/deps/' + path;\n            return path;\n        };\n\n        /**\n         * Check if module is defined at `path`.\n         */\n\n        localrequirePomelo.exists = function (path) {\n            return has.call(selfPomelo.modules, localrequirePomelo.resolve(path));\n        };\n\n        return localrequirePomelo;\n    }\n});\n\npomeloBuild.create = function () {\n    var pomeloBuildObj = new pomeloBuild();\n    pomeloBuildObj.onLoad();\n\n    pomeloBuildObj.register(\"component-indexof/index.js\", function (exports, requirePomelo, module) {\n\n        var indexOf = [].indexOf;\n\n        module.exports = function (arr, obj) {\n            if (indexOf) return arr.indexOf(obj);\n            for (var i = 0; i < arr.length; ++i) {\n                if (arr[i] === obj) return i;\n            }\n            return -1;\n        };\n    });\n\n    pomeloBuildObj.register(\"component-emitter/index.js\", function (exports, requirePomelo, module) {\n\n        /**\n         * Module dependencies.\n         */\n\n        var index = requirePomelo('indexof');\n\n        /**\n         * Expose `Emitter`.\n         */\n\n        module.exports = Emitter;\n\n        /**\n         * Initialize a new `Emitter`.\n         *\n         * @api public\n         */\n\n        function Emitter(obj) {\n            if (obj) return mixin(obj);\n        };\n\n        /**\n         * Mixin the emitter properties.\n         *\n         * @param {Object} obj\n         * @return {Object}\n         * @api private\n         */\n\n        function mixin(obj) {\n            for (var key in Emitter.prototype) {\n                obj[key] = Emitter.prototype[key];\n            }\n            return obj;\n        }\n\n        /**\n         * Listen on the given `event` with `fn`.\n         *\n         * @param {String} event\n         * @param {Function} fn\n         * @return {Emitter}\n         * @api public\n         */\n\n        Emitter.prototype.on = function (event, fn) {\n            this._callbacks = this._callbacks || {};\n            (this._callbacks[event] = this._callbacks[event] || [])\n                .push(fn);\n            return this;\n        };\n\n        /**\n         * Adds an `event` listener that will be invoked a single\n         * time then automatically removed.\n         *\n         * @param {String} event\n         * @param {Function} fn\n         * @return {Emitter}\n         * @api public\n         */\n\n        Emitter.prototype.once = function (event, fn) {\n            var self = this;\n            this._callbacks = this._callbacks || {};\n\n            function on() {\n                self.off(event, on);\n                fn.apply(this, arguments);\n            }\n\n            fn._off = on;\n            this.on(event, on);\n            return this;\n        };\n\n        /**\n         * Remove the given callback for `event` or all\n         * registered callbacks.\n         *\n         * @param {String} event\n         * @param {Function} fn\n         * @return {Emitter}\n         * @api public\n         */\n\n        Emitter.prototype.off =\n            Emitter.prototype.removeListener =\n                Emitter.prototype.removeAllListeners = function (event, fn) {\n                    this._callbacks = this._callbacks || {};\n\n                    // all\n                    if (0 === arguments.length) {\n                        this._callbacks = {};\n                        return this;\n                    }\n\n                    // specific event\n                    var callbacks = this._callbacks[event];\n                    if (!callbacks) return this;\n\n                    // remove all handlers\n                    if (1 === arguments.length) {\n                        delete this._callbacks[event];\n                        return this;\n                    }\n\n                    // remove specific handler\n                    var i = index(callbacks, fn._off || fn);\n                    if (~i) callbacks.splice(i, 1);\n                    return this;\n                };\n\n        /**\n         * Emit `event` with the given args.\n         *\n         * @param {String} event\n         * @param {Mixed} ...\n         * @return {Emitter}\n         */\n\n        Emitter.prototype.emit = function (event) {\n            this._callbacks = this._callbacks || {};\n            var args = [].slice.call(arguments, 1), callbacks = this._callbacks[event];\n\n            if (callbacks) {\n                callbacks = callbacks.slice(0);\n                for (var i = 0, len = callbacks.length; i < len; ++i) {\n                    callbacks[i].apply(this, args);\n                }\n            }\n\n            return this;\n        };\n\n        /**\n         * Return array of callbacks for `event`.\n         *\n         * @param {String} event\n         * @return {Array}\n         * @api public\n         */\n\n        Emitter.prototype.listeners = function (event) {\n            this._callbacks = this._callbacks || {};\n            return this._callbacks[event] || [];\n        };\n\n        /**\n         * Check if this emitter has `event` handlers.\n         *\n         * @param {String} event\n         * @return {Boolean}\n         * @api public\n         */\n\n        Emitter.prototype.hasListeners = function (event) {\n            return !!this.listeners(event).length;\n        };\n\n    });\n\n    pomeloBuildObj.register(\"NetEase-pomelo-protocol/lib/protocol.js\", function (exports, requirePomelo, module) {\n        (function (exports, ByteArray, global) {\n            var Protocol = exports;\n\n            var PKG_HEAD_BYTES = 4;\n            var MSG_FLAG_BYTES = 1;\n            var MSG_ROUTE_CODE_BYTES = 2;\n            var MSG_ID_MAX_BYTES = 5;\n            var MSG_ROUTE_LEN_BYTES = 1;\n\n            var MSG_ROUTE_CODE_MAX = 0xffff;\n\n            var MSG_COMPRESS_ROUTE_MASK = 0x1;\n            var MSG_TYPE_MASK = 0x7;\n\n            var Package = Protocol.Package = {};\n            var Message = Protocol.Message = {};\n\n            Package.TYPE_HANDSHAKE = 1;\n            Package.TYPE_HANDSHAKE_ACK = 2;\n            Package.TYPE_HEARTBEAT = 3;\n            Package.TYPE_DATA = 4;\n            Package.TYPE_KICK = 5;\n\n            Message.TYPE_REQUEST = 0;\n            Message.TYPE_NOTIFY = 1;\n            Message.TYPE_RESPONSE = 2;\n            Message.TYPE_PUSH = 3;\n\n            /**\n             * pomele client encode\n             * id message id;\n             * route message route\n             * msg message body\n             * socketio current support string\n             */\n            Protocol.strencode = function (str) {\n                var byteArray = new ByteArray(str.length * 3);\n                var offset = 0;\n                for (var i = 0; i < str.length; i++) {\n                    var charCode = str.charCodeAt(i);\n                    var codes = null;\n                    if (charCode <= 0x7f) {\n                        codes = [charCode];\n                    } else if (charCode <= 0x7ff) {\n                        codes = [0xc0 | (charCode >> 6), 0x80 | (charCode & 0x3f)];\n                    } else {\n                        codes = [0xe0 | (charCode >> 12), 0x80 | ((charCode & 0xfc0) >> 6), 0x80 | (charCode & 0x3f)];\n                    }\n                    for (var j = 0; j < codes.length; j++) {\n                        byteArray[offset] = codes[j];\n                        ++offset;\n                    }\n                }\n                var _buffer = new ByteArray(offset);\n                copyArray(_buffer, 0, byteArray, 0, offset);\n                return _buffer;\n            };\n\n            /**\n             * client decode\n             * msg String data\n             * return Message Object\n             */\n            Protocol.strdecode = function (buffer) {\n                var bytes = new ByteArray(buffer);\n                var array = [];\n                var offset = 0;\n                var charCode = 0;\n                var end = bytes.length;\n                while (offset < end) {\n                    if (bytes[offset] < 128) {\n                        charCode = bytes[offset];\n                        offset += 1;\n                    } else if (bytes[offset] < 224) {\n                        charCode = ((bytes[offset] & 0x3f) << 6) + (bytes[offset + 1] & 0x3f);\n                        offset += 2;\n                    } else {\n                        charCode = ((bytes[offset] & 0x0f) << 12) + ((bytes[offset + 1] & 0x3f) << 6) + (bytes[offset + 2] & 0x3f);\n                        offset += 3;\n                    }\n                    array.push(charCode);\n                }\n                var res = '';\n                var chunk = 8 * 1024;\n                var i;\n                for (i = 0; i < array.length / chunk; i++) {\n                    res += String.fromCharCode.apply(null, array.slice(i * chunk, (i + 1) * chunk));\n                }\n                res += String.fromCharCode.apply(null, array.slice(i * chunk));\n                return res;\n            };\n\n            /**\n             * Package protocol encode.\n             *\n             * Pomelo package format:\n             * +------+-------------+------------------+\n             * | type | body length |       body       |\n             * +------+-------------+------------------+\n             *\n             * Head: 4bytes\n             *   0: package type,\n             *      1 - handshake,\n             *      2 - handshake ack,\n             *      3 - heartbeat,\n             *      4 - data\n             *      5 - kick\n             *   1 - 3: big-endian body length\n             * Body: body length bytes\n             *\n             * @param  {Number}    type   package type\n             * @param  {ByteArray} body   body content in bytes\n             * @return {ByteArray}        new byte array that contains encode result\n             */\n            Package.encode = function (type, body) {\n                var length = body ? body.length : 0;\n                var buffer = new ByteArray(PKG_HEAD_BYTES + length);\n                var index = 0;\n                buffer[index++] = type & 0xff;\n                buffer[index++] = (length >> 16) & 0xff;\n                buffer[index++] = (length >> 8) & 0xff;\n                buffer[index++] = length & 0xff;\n                if (body) {\n                    copyArray(buffer, index, body, 0, length);\n                }\n                return buffer;\n            };\n\n            /**\n             * Package protocol decode.\n             * See encode for package format.\n             *\n             * @param  {ByteArray} buffer byte array containing package content\n             * @return {Object}           {type: package type, buffer: body byte array}\n             */\n            Package.decode = function (buffer) {\n                var bytes = new ByteArray(buffer);\n                var type = bytes[0];\n                var index = 1;\n                var length = ((bytes[index++]) << 16 | (bytes[index++]) << 8 | bytes[index++]) >>> 0;\n                var body = length ? new ByteArray(length) : null;\n                copyArray(body, 0, bytes, PKG_HEAD_BYTES, length);\n                return {'type': type, 'body': body};\n            };\n\n            /**\n             * Message protocol encode.\n             *\n             * @param  {Number} id            message id\n             * @param  {Number} type          message type\n             * @param  {Number} compressRoute whether compress route\n             * @param  {Number|String} route  route code or route string\n             * @param  {Buffer} msg           message body bytes\n             * @return {Buffer}               encode result\n             */\n            Message.encode = function (id, type, compressRoute, route, msg) {\n                // caculate message max length\n                var idBytes = msgHasId(type) ? caculateMsgIdBytes(id) : 0;\n                var msgLen = MSG_FLAG_BYTES + idBytes;\n\n                if (msgHasRoute(type)) {\n                    if (compressRoute) {\n                        if (typeof route !== 'number') {\n                            throw new Error('error flag for number route!');\n                        }\n                        msgLen += MSG_ROUTE_CODE_BYTES;\n                    } else {\n                        msgLen += MSG_ROUTE_LEN_BYTES;\n                        if (route) {\n                            route = Protocol.strencode(route);\n                            if (route.length > 255) {\n                                throw new Error('route maxlength is overflow');\n                            }\n                            msgLen += route.length;\n                        }\n                    }\n                }\n\n                if (msg) {\n                    msgLen += msg.length;\n                }\n\n                var buffer = new ByteArray(msgLen);\n                var offset = 0;\n\n                // add flag\n                offset = encodeMsgFlag(type, compressRoute, buffer, offset);\n\n                // add message id\n                if (msgHasId(type)) {\n                    offset = encodeMsgId(id, idBytes, buffer, offset);\n                }\n\n                // add route\n                if (msgHasRoute(type)) {\n                    offset = encodeMsgRoute(compressRoute, route, buffer, offset);\n                }\n\n                // add body\n                if (msg) {\n                    offset = encodeMsgBody(msg, buffer, offset);\n                }\n\n                return buffer;\n            };\n\n            /**\n             * Message protocol decode.\n             *\n             * @param  {Buffer|Uint8Array} buffer message bytes\n             * @return {Object}            message object\n             */\n            Message.decode = function (buffer) {\n                var bytes = new ByteArray(buffer);\n                var bytesLen = bytes.length || bytes.byteLength;\n                var offset = 0;\n                var id = 0;\n                var route = null;\n\n                // parse flag\n                var flag = bytes[offset++];\n                var compressRoute = flag & MSG_COMPRESS_ROUTE_MASK;\n                var type = (flag >> 1) & MSG_TYPE_MASK;\n\n                // parse id\n                if (msgHasId(type)) {\n                    var byte = bytes[offset++];\n                    id = byte & 0x7f;\n                    while (byte & 0x80) {\n                        id <<= 7;\n                        byte = bytes[offset++];\n                        id |= byte & 0x7f;\n                    }\n                }\n\n                // parse route\n                if (msgHasRoute(type)) {\n                    if (compressRoute) {\n                        route = (bytes[offset++]) << 8 | bytes[offset++];\n                    } else {\n                        var routeLen = bytes[offset++];\n                        if (routeLen) {\n                            route = new ByteArray(routeLen);\n                            copyArray(route, 0, bytes, offset, routeLen);\n                            route = Protocol.strdecode(route);\n                        } else {\n                            route = '';\n                        }\n                        offset += routeLen;\n                    }\n                }\n\n                // parse body\n                var bodyLen = bytesLen - offset;\n                var body = new ByteArray(bodyLen);\n\n                copyArray(body, 0, bytes, offset, bodyLen);\n\n                return {\n                    'id': id, 'type': type, 'compressRoute': compressRoute,\n                    'route': route, 'body': body\n                };\n            };\n\n            var copyArray = function (dest, doffset, src, soffset, length) {\n                if ('function' === typeof src.copy) {\n                    // Buffer\n                    src.copy(dest, doffset, soffset, soffset + length);\n                } else {\n                    // Uint8Array\n                    for (var index = 0; index < length; index++) {\n                        dest[doffset++] = src[soffset++];\n                    }\n                }\n            };\n\n            var msgHasId = function (type) {\n                return type === Message.TYPE_REQUEST || type === Message.TYPE_RESPONSE;\n            };\n\n            var msgHasRoute = function (type) {\n                return type === Message.TYPE_REQUEST || type === Message.TYPE_NOTIFY ||\n                    type === Message.TYPE_PUSH;\n            };\n\n            var caculateMsgIdBytes = function (id) {\n                var len = 0;\n                do {\n                    len += 1;\n                    id >>= 7;\n                } while (id > 0);\n                return len;\n            };\n\n            var encodeMsgFlag = function (type, compressRoute, buffer, offset) {\n                if (type !== Message.TYPE_REQUEST && type !== Message.TYPE_NOTIFY &&\n                    type !== Message.TYPE_RESPONSE && type !== Message.TYPE_PUSH) {\n                    throw new Error('unkonw message type: ' + type);\n                }\n\n                buffer[offset] = (type << 1) | (compressRoute ? 1 : 0);\n\n                return offset + MSG_FLAG_BYTES;\n            };\n\n            var encodeMsgId = function (id, idBytes, buffer, offset) {\n                var index = offset + idBytes - 1;\n                buffer[index--] = id & 0x7f;\n                while (index >= offset) {\n                    id >>= 7;\n                    buffer[index--] = id & 0x7f | 0x80;\n                }\n                return offset + idBytes;\n            };\n\n            var encodeMsgRoute = function (compressRoute, route, buffer, offset) {\n                if (compressRoute) {\n                    if (route > MSG_ROUTE_CODE_MAX) {\n                        throw new Error('route number is overflow');\n                    }\n\n                    buffer[offset++] = (route >> 8) & 0xff;\n                    buffer[offset++] = route & 0xff;\n                } else {\n                    if (route) {\n                        buffer[offset++] = route.length & 0xff;\n                        copyArray(buffer, offset, route, 0, route.length);\n                        offset += route.length;\n                    } else {\n                        buffer[offset++] = 0;\n                    }\n                }\n\n                return offset;\n            };\n\n            var encodeMsgBody = function (msg, buffer, offset) {\n                copyArray(buffer, offset, msg, 0, msg.length);\n                return offset + msg.length;\n            };\n\n            module.exports = Protocol;\n        })('object' === typeof module ? module.exports : (this.Protocol = {}), 'object' === typeof module ? Buffer : Uint8Array, this);\n\n    });\n\n    pomeloBuildObj.register(\"pomelonode-pomelo-protobuf/lib/client/protobuf.js\", function (exports, requirePomelo, module) {\n        /* ProtocolBuffer client 0.1.0*/\n\n        /**\n         * pomelo-protobuf\n         * @author <zhang0935@gmail.com>\n         */\n\n        /**\n         * Protocol buffer root\n         * In browser, it will be window.protbuf\n         */\n        (function (exports, global) {\n            var Protobuf = exports;\n\n            Protobuf.init = function (opts) {\n                //On the serverside, use serverProtos to encode messages send to client\n                Protobuf.encoder.init(opts.encoderProtos);\n\n                //On the serverside, user clientProtos to decode messages receive from clients\n                Protobuf.decoder.init(opts.decoderProtos);\n            };\n\n            Protobuf.encode = function (key, msg) {\n                return Protobuf.encoder.encode(key, msg);\n            };\n\n            Protobuf.decode = function (key, msg) {\n                return Protobuf.decoder.decode(key, msg);\n            };\n\n            // exports to support for components\n            module.exports = Protobuf;\n        })('object' === typeof module ? module.exports : (this.protobuf = {}), this);\n\n        /**\n         * constants\n         */\n        (function (exports, global) {\n            var constants = exports.constants = {};\n\n            constants.TYPES = {\n                uInt32: 0,\n                sInt32: 0,\n                int32: 0,\n                double: 1,\n                string: 2,\n                message: 2,\n                float: 5\n            };\n\n        })('undefined' !== typeof protobuf ? protobuf : module.exports, this);\n\n        /**\n         * util module\n         */\n        (function (exports, global) {\n\n            var Util = exports.util = {};\n\n            Util.isSimpleType = function (type) {\n                return ( type === 'uInt32' ||\n                type === 'sInt32' ||\n                type === 'int32' ||\n                type === 'uInt64' ||\n                type === 'sInt64' ||\n                type === 'float' ||\n                type === 'double' );\n            };\n\n        })('undefined' !== typeof protobuf ? protobuf : module.exports, this);\n\n        /**\n         * codec module\n         */\n        (function (exports, global) {\n\n            var Codec = exports.codec = {};\n\n            var buffer = new ArrayBuffer(8);\n            var float32Array = new Float32Array(buffer);\n            var float64Array = new Float64Array(buffer);\n            var uInt8Array = new Uint8Array(buffer);\n\n            Codec.encodeUInt32 = function (n) {\n                var n = parseInt(n);\n                if (isNaN(n) || n < 0) {\n                    return null;\n                }\n\n                var result = [];\n                do {\n                    var tmp = n % 128;\n                    var next = Math.floor(n / 128);\n\n                    if (next !== 0) {\n                        tmp = tmp + 128;\n                    }\n                    result.push(tmp);\n                    n = next;\n                } while (n !== 0);\n\n                return result;\n            };\n\n            Codec.encodeSInt32 = function (n) {\n                var n = parseInt(n);\n                if (isNaN(n)) {\n                    return null;\n                }\n                n = n < 0 ? (Math.abs(n) * 2 - 1) : n * 2;\n\n                return Codec.encodeUInt32(n);\n            };\n\n            Codec.decodeUInt32 = function (bytes) {\n                var n = 0;\n\n                for (var i = 0; i < bytes.length; i++) {\n                    var m = parseInt(bytes[i]);\n                    n = n + ((m & 0x7f) * Math.pow(2, (7 * i)));\n                    if (m < 128) {\n                        return n;\n                    }\n                }\n\n                return n;\n            };\n\n\n            Codec.decodeSInt32 = function (bytes) {\n                var n = this.decodeUInt32(bytes);\n                var flag = ((n % 2) === 1) ? -1 : 1;\n\n                n = ((n % 2 + n) / 2) * flag;\n\n                return n;\n            };\n\n            Codec.encodeFloat = function (float) {\n                float32Array[0] = float;\n                return uInt8Array;\n            };\n\n            Codec.decodeFloat = function (bytes, offset) {\n                if (!bytes || bytes.length < (offset + 4)) {\n                    return null;\n                }\n\n                for (var i = 0; i < 4; i++) {\n                    uInt8Array[i] = bytes[offset + i];\n                }\n\n                return float32Array[0];\n            };\n\n            Codec.encodeDouble = function (double) {\n                float64Array[0] = double;\n                return uInt8Array.subarray(0, 8);\n            };\n\n            Codec.decodeDouble = function (bytes, offset) {\n                if (!bytes || bytes.length < (8 + offset)) {\n                    return null;\n                }\n\n                for (var i = 0; i < 8; i++) {\n                    uInt8Array[i] = bytes[offset + i];\n                }\n\n                return float64Array[0];\n            };\n\n            Codec.encodeStr = function (bytes, offset, str) {\n                for (var i = 0; i < str.length; i++) {\n                    var code = str.charCodeAt(i);\n                    var codes = encode2UTF8(code);\n\n                    for (var j = 0; j < codes.length; j++) {\n                        bytes[offset] = codes[j];\n                        offset++;\n                    }\n                }\n\n                return offset;\n            };\n\n            /**\n             * Decode string from utf8 bytes\n             */\n            Codec.decodeStr = function (bytes, offset, length) {\n                var array = [];\n                var end = offset + length;\n\n                while (offset < end) {\n                    var code = 0;\n\n                    if (bytes[offset] < 128) {\n                        code = bytes[offset];\n\n                        offset += 1;\n                    } else if (bytes[offset] < 224) {\n                        code = ((bytes[offset] & 0x3f) << 6) + (bytes[offset + 1] & 0x3f);\n                        offset += 2;\n                    } else {\n                        code = ((bytes[offset] & 0x0f) << 12) + ((bytes[offset + 1] & 0x3f) << 6) + (bytes[offset + 2] & 0x3f);\n                        offset += 3;\n                    }\n\n                    array.push(code);\n\n                }\n\n                var str = '';\n                for (var i = 0; i < array.length;) {\n                    str += String.fromCharCode.apply(null, array.slice(i, i + 10000));\n                    i += 10000;\n                }\n\n                return str;\n            };\n\n            /**\n             * Return the byte length of the str use utf8\n             */\n            Codec.byteLength = function (str) {\n                if (typeof(str) !== 'string') {\n                    return -1;\n                }\n\n                var length = 0;\n\n                for (var i = 0; i < str.length; i++) {\n                    var code = str.charCodeAt(i);\n                    length += codeLength(code);\n                }\n\n                return length;\n            };\n\n            /**\n             * Encode a unicode16 char code to utf8 bytes\n             */\n            function encode2UTF8(charCode) {\n                if (charCode <= 0x7f) {\n                    return [charCode];\n                } else if (charCode <= 0x7ff) {\n                    return [0xc0 | (charCode >> 6), 0x80 | (charCode & 0x3f)];\n                } else {\n                    return [0xe0 | (charCode >> 12), 0x80 | ((charCode & 0xfc0) >> 6), 0x80 | (charCode & 0x3f)];\n                }\n            }\n\n            function codeLength(code) {\n                if (code <= 0x7f) {\n                    return 1;\n                } else if (code <= 0x7ff) {\n                    return 2;\n                } else {\n                    return 3;\n                }\n            }\n        })('undefined' !== typeof protobuf ? protobuf : module.exports, this);\n\n        /**\n         * encoder module\n         */\n        (function (exports, global) {\n\n            var protobuf = exports;\n            var MsgEncoder = exports.encoder = {};\n\n            var codec = protobuf.codec;\n            var constant = protobuf.constants;\n            var util = protobuf.util;\n\n            MsgEncoder.init = function (protos) {\n                this.protos = protos || {};\n            };\n\n            MsgEncoder.encode = function (route, msg) {\n                //Get protos from protos map use the route as key\n                var protos = this.protos[route];\n\n                //Check msg\n                if (!checkMsg(msg, protos)) {\n                    return null;\n                }\n\n                //Set the length of the buffer 2 times bigger to prevent overflow\n                var length = codec.byteLength(JSON.stringify(msg));\n\n                //Init buffer and offset\n                var buffer = new ArrayBuffer(length);\n                var uInt8Array = new Uint8Array(buffer);\n                var offset = 0;\n\n                if (!!protos) {\n                    offset = encodeMsg(uInt8Array, offset, protos, msg);\n                    if (offset > 0) {\n                        return uInt8Array.subarray(0, offset);\n                    }\n                }\n\n                return null;\n            };\n\n            /**\n             * Check if the msg follow the defination in the protos\n             */\n            function checkMsg(msg, protos) {\n                if (!protos) {\n                    return false;\n                }\n\n                for (var name in protos) {\n                    var proto = protos[name];\n\n                    //All required element must exist\n                    switch (proto.option) {\n                        case 'required' :\n                            if (typeof(msg[name]) === 'undefined') {\n                                return false;\n                            }\n                        case 'optional' :\n                            if (typeof(msg[name]) !== 'undefined') {\n                                var message = protos.__messages[proto.type] || MsgEncoder.protos['message ' + proto.type];\n                                if (!!message) {\n                                    checkMsg(msg[name], message);\n                                }\n                            }\n                            break;\n                        case 'repeated' :\n                            //Check nest message in repeated elements\n                            var message = protos.__messages[proto.type] || MsgEncoder.protos['message ' + proto.type];\n                            if (!!msg[name] && !!message) {\n                                for (var i = 0; i < msg[name].length; i++) {\n                                    if (!checkMsg(msg[name][i], message)) {\n                                        return false;\n                                    }\n                                }\n                            }\n                            break;\n                    }\n                }\n\n                return true;\n            }\n\n            function encodeMsg(buffer, offset, protos, msg) {\n                for (var name in msg) {\n                    if (!!protos[name]) {\n                        var proto = protos[name];\n\n                        switch (proto.option) {\n                            case 'required' :\n                            case 'optional' :\n                                offset = writeBytes(buffer, offset, encodeTag(proto.type, proto.tag));\n                                offset = encodeProp(msg[name], proto.type, offset, buffer, protos);\n                                break;\n                            case 'repeated' :\n                                if (msg[name].length > 0) {\n                                    offset = encodeArray(msg[name], proto, offset, buffer, protos);\n                                }\n                                break;\n                        }\n                    }\n                }\n\n                return offset;\n            }\n\n            function encodeProp(value, type, offset, buffer, protos) {\n                switch (type) {\n                    case 'uInt32':\n                        offset = writeBytes(buffer, offset, codec.encodeUInt32(value));\n                        break;\n                    case 'int32' :\n                    case 'sInt32':\n                        offset = writeBytes(buffer, offset, codec.encodeSInt32(value));\n                        break;\n                    case 'float':\n                        writeBytes(buffer, offset, codec.encodeFloat(value));\n                        offset += 4;\n                        break;\n                    case 'double':\n                        writeBytes(buffer, offset, codec.encodeDouble(value));\n                        offset += 8;\n                        break;\n                    case 'string':\n                        var length = codec.byteLength(value);\n\n                        //Encode length\n                        offset = writeBytes(buffer, offset, codec.encodeUInt32(length));\n                        //write string\n                        codec.encodeStr(buffer, offset, value);\n                        offset += length;\n                        break;\n                    default :\n                        var message = protos.__messages[type] || MsgEncoder.protos['message ' + type];\n                        if (!!message) {\n                            //Use a tmp buffer to build an internal msg\n                            var tmpBuffer = new ArrayBuffer(codec.byteLength(JSON.stringify(value)));\n                            var length = 0;\n\n                            length = encodeMsg(tmpBuffer, length, message, value);\n                            //Encode length\n                            offset = writeBytes(buffer, offset, codec.encodeUInt32(length));\n                            //contact the object\n                            for (var i = 0; i < length; i++) {\n                                buffer[offset] = tmpBuffer[i];\n                                offset++;\n                            }\n                        }\n                        break;\n                }\n\n                return offset;\n            }\n\n            /**\n             * Encode reapeated properties, simple msg and object are decode differented\n             */\n            function encodeArray(array, proto, offset, buffer, protos) {\n                var i = 0;\n\n                if (util.isSimpleType(proto.type)) {\n                    offset = writeBytes(buffer, offset, encodeTag(proto.type, proto.tag));\n                    offset = writeBytes(buffer, offset, codec.encodeUInt32(array.length));\n                    for (i = 0; i < array.length; i++) {\n                        offset = encodeProp(array[i], proto.type, offset, buffer);\n                    }\n                } else {\n                    for (i = 0; i < array.length; i++) {\n                        offset = writeBytes(buffer, offset, encodeTag(proto.type, proto.tag));\n                        offset = encodeProp(array[i], proto.type, offset, buffer, protos);\n                    }\n                }\n\n                return offset;\n            }\n\n            function writeBytes(buffer, offset, bytes) {\n                for (var i = 0; i < bytes.length; i++, offset++) {\n                    buffer[offset] = bytes[i];\n                }\n\n                return offset;\n            }\n\n            function encodeTag(type, tag) {\n                var value = constant.TYPES[type] || 2;\n                return codec.encodeUInt32((tag << 3) | value);\n            }\n        })('undefined' !== typeof protobuf ? protobuf : module.exports, this);\n\n        /**\n         * decoder module\n         */\n        (function (exports, global) {\n            var protobuf = exports;\n            var MsgDecoder = exports.decoder = {};\n\n            var codec = protobuf.codec;\n            var util = protobuf.util;\n\n            var buffer;\n            var offset = 0;\n\n            MsgDecoder.init = function (protos) {\n                this.protos = protos || {};\n            };\n\n            MsgDecoder.setProtos = function (protos) {\n                if (!!protos) {\n                    this.protos = protos;\n                }\n            };\n\n            MsgDecoder.decode = function (route, buf) {\n                var protos = this.protos[route];\n\n                buffer = buf;\n                offset = 0;\n\n                if (!!protos) {\n                    return decodeMsg({}, protos, buffer.length);\n                }\n\n                return null;\n            };\n\n            function decodeMsg(msg, protos, length) {\n                while (offset < length) {\n                    var head = getHead();\n                    var type = head.type;\n                    var tag = head.tag;\n                    var name = protos.__tags[tag];\n\n                    switch (protos[name].option) {\n                        case 'optional' :\n                        case 'required' :\n                            msg[name] = decodeProp(protos[name].type, protos);\n                            break;\n                        case 'repeated' :\n                            if (!msg[name]) {\n                                msg[name] = [];\n                            }\n                            decodeArray(msg[name], protos[name].type, protos);\n                            break;\n                    }\n                }\n\n                return msg;\n            }\n\n            /**\n             * Test if the given msg is finished\n             */\n            function isFinish(msg, protos) {\n                return (!protos.__tags[peekHead().tag]);\n            }\n\n            /**\n             * Get property head from protobuf\n             */\n            function getHead() {\n                var tag = codec.decodeUInt32(getBytes());\n\n                return {\n                    type: tag & 0x7,\n                    tag: tag >> 3\n                };\n            }\n\n            /**\n             * Get tag head without move the offset\n             */\n            function peekHead() {\n                var tag = codec.decodeUInt32(peekBytes());\n\n                return {\n                    type: tag & 0x7,\n                    tag: tag >> 3\n                };\n            }\n\n            function decodeProp(type, protos) {\n                switch (type) {\n                    case 'uInt32':\n                        return codec.decodeUInt32(getBytes());\n                    case 'int32' :\n                    case 'sInt32' :\n                        return codec.decodeSInt32(getBytes());\n                    case 'float' :\n                        var float = codec.decodeFloat(buffer, offset);\n                        offset += 4;\n                        return float;\n                    case 'double' :\n                        var double = codec.decodeDouble(buffer, offset);\n                        offset += 8;\n                        return double;\n                    case 'string' :\n                        var length = codec.decodeUInt32(getBytes());\n\n                        var str = codec.decodeStr(buffer, offset, length);\n                        offset += length;\n\n                        return str;\n                    default :\n                        var message = protos.__messages[type] || MsgDecoder.protos['message ' + type];\n                        if (!!protos && !!message) {\n                            var length = codec.decodeUInt32(getBytes());\n                            var msg = {};\n                            decodeMsg(msg, message, offset + length);\n                            return msg;\n                        }\n                        break;\n                }\n            }\n\n            function decodeArray(array, type, protos) {\n                if (util.isSimpleType(type)) {\n                    var length = codec.decodeUInt32(getBytes());\n\n                    for (var i = 0; i < length; i++) {\n                        array.push(decodeProp(type));\n                    }\n                } else {\n                    array.push(decodeProp(type, protos));\n                }\n            }\n\n            function getBytes(flag) {\n                var bytes = [];\n                var pos = offset;\n                flag = flag || false;\n\n                var b;\n\n                do {\n                    b = buffer[pos];\n                    bytes.push(b);\n                    pos++;\n                } while (b >= 128);\n\n                if (!flag) {\n                    offset = pos;\n                }\n                return bytes;\n            }\n\n            function peekBytes() {\n                return getBytes(true);\n            }\n\n        })('undefined' !== typeof protobuf ? protobuf : module.exports, this);\n\n\n    });\n\n    pomeloBuildObj.register(\"pomelonode-pomelo-jsclient-websocket/lib/pomelo-client.js\", function (exports, requirePomelo, module) {\n        (function (self) {\n            var JS_WS_CLIENT_TYPE = 'js-websocket';\n            var JS_WS_CLIENT_VERSION = '0.0.1';\n\n            var Protocol = self.Protocol;\n            var Package = Protocol.Package;\n            var Message = Protocol.Message;\n            var EventEmitter = self.EventEmitter;\n            var protobuf = self.protobuf;\n\n            var RES_OK = 200;\n            var RES_FAIL = 500;\n            var RES_OLD_CLIENT = 501;\n\n            if (typeof Object.create !== 'function') {\n                Object.create = function (o) {\n                    function F() {\n                    }\n\n                    F.prototype = o;\n                    return new F();\n                };\n            }\n\n            var root = window;\n            var pomelo = Object.create(EventEmitter.prototype); // object extend from object\n            root.pomelo = pomelo;\n            var socket = null;\n            var reqId = 0;\n            var callbacks = {};\n            var handlers = {};\n            //Map from request id to route\n            var routeMap = {};\n\n            var heartbeatInterval = 0;\n            var heartbeatTimeout = 0;\n            var nextHeartbeatTimeout = 0;\n            var gapThreshold = 100;   // heartbeat gap threashold\n            var heartbeatId = null;\n            var heartbeatTimeoutId = null;\n\n            var handshakeCallback = null;\n\n            var handshakeBuffer = {\n                'sys': {\n                    type: JS_WS_CLIENT_TYPE,\n                    version: JS_WS_CLIENT_VERSION\n                },\n                'user': {}\n            };\n\n            var initCallback = null;\n\n            pomelo.init = function (params, cb) {\n                initCallback = cb;\n                var host = params.host;\n                var port = params.port;\n\n                var wsStr = \"ws://\";\n\n                if (params.wsStr) {\n                    wsStr = params.wsStr;\n                }\n\n                var url = wsStr + host;\n                if (port) {\n                    url += ':' + port;\n                }\n\n                handshakeBuffer.user = params.user;\n                handshakeCallback = params.handshakeCallback;\n                initWebSocket(url, cb);\n            };\n\n            var initWebSocket = function (url, cb) {\n                console.log('connect to ' + url);\n                var onopen = function (event) {\n                    var obj = Package.encode(Package.TYPE_HANDSHAKE, Protocol.strencode(JSON.stringify(handshakeBuffer)));\n                    send(obj);\n                };\n                var onmessage = function (event) {\n                    processPackage(Package.decode(event.data), cb);\n                    // new package arrived, update the heartbeat timeout\n                    if (heartbeatTimeout) {\n                        nextHeartbeatTimeout = Date.now() + heartbeatTimeout;\n                    }\n                };\n                var onerror = function (event) {\n                    pomelo.emit('io-error', event);\n                    console.warn('socket error: ', JSON.stringify(event));\n                };\n                var onclose = function (event) {\n                    pomelo.emit('close', event);\n                    console.warn('socket close: ', JSON.stringify(event));\n                    // //\n                    // if (heartbeatId) {\n                    //     clearTimeout(heartbeatId);\n                    //     heartbeatId = null;\n                    // }\n                    //\n                    // if (heartbeatTimeoutId) {\n                    //     clearTimeout(heartbeatTimeoutId);\n                    //     heartbeatTimeoutId = null;\n                    // }\n                };\n                socket = new WebSocket(url);\n                socket.binaryType = 'arraybuffer';\n                socket.onopen = onopen;\n                socket.onmessage = onmessage;\n                socket.onerror = onerror;\n                socket.onclose = onclose;\n            };\n\n            pomelo.disconnect = function () {\n                if (socket) {\n                    if (socket.disconnect) socket.disconnect();\n                    if (socket.close) socket.close();\n                    console.log('disconnect');\n                    socket = null;\n                }\n\n                if (heartbeatId) {\n                    clearTimeout(heartbeatId);\n                    heartbeatId = null;\n                }\n                if (heartbeatTimeoutId) {\n                    clearTimeout(heartbeatTimeoutId);\n                    heartbeatTimeoutId = null;\n                }\n            };\n\n            pomelo.request = function (route, msg, cb) {\n                if (arguments.length === 2 && typeof msg === 'function') {\n                    cb = msg;\n                    msg = {};\n                } else {\n                    msg = msg || {};\n                }\n                route = route || msg.route;\n                if (!route) {\n                    return;\n                }\n\n                reqId++;\n                /**\n                 * 128reqId,128\n                 * //pomelo-protocol.js#243\n                 *  do{\n                        m = parseInt(bytes[offset]);\n                        id += (m & 0x7f) << (7 * i);   //bug\n                        offset++;\n                        i++;\n                    }while(m >= 128); \n                 * \n                 */\n                if (reqId % 128 == 0){\n                    reqId++;\n                }\n\n                sendMessage(reqId, route, msg);\n\n                callbacks[reqId] = cb;\n                routeMap[reqId] = route;\n            };\n\n            pomelo.notify = function (route, msg) {\n                msg = msg || {};\n                sendMessage(0, route, msg);\n            };\n\n            pomelo.clearCallback = function () {\n                if(!socket) return;\n                socket.onopen = null;\n                socket.onmessage = null;\n                socket.onerror = null;\n                socket.onclose = null;\n            };\n\n            pomelo.isConnecting = function () {\n                return (socket && socket.readyState === WebSocket.CONNECTING);\n            };\n\n            pomelo.isOpen = function () {\n                return (socket && socket.readyState === WebSocket.OPEN);\n            };\n\n            pomelo.isClosed = function () {\n                return (socket && socket.readyState === WebSocket.CLOSED);\n            };\n\n            pomelo.isClosing = function () {\n                return (socket && socket.readyState === WebSocket.CLOSING);\n            };\n\n            var sendMessage = function (reqId, route, msg) {\n                var type = reqId ? Message.TYPE_REQUEST : Message.TYPE_NOTIFY;\n\n                //compress message by protobuf\n                var protos = !!pomelo.data.protos ? pomelo.data.protos.client : {};\n                if (!!protos[route]) {\n                    msg = protobuf.encode(route, msg);\n                } else {\n                    msg = Protocol.strencode(JSON.stringify(msg));\n                }\n\n\n                var compressRoute = 0;\n                if (pomelo.dict && pomelo.dict[route]) {\n                    route = pomelo.dict[route];\n                    compressRoute = 1;\n                }\n\n                msg = Message.encode(reqId, type, compressRoute, route, msg);\n                var packet = Package.encode(Package.TYPE_DATA, msg);\n                send(packet);\n            };\n\n            var send = function (packet) {\n                if (socket) {\n                    socket.send(packet.buffer);\n                }\n            };\n\n\n            var handler = {};\n\n            var heartbeat = function (data) {\n                if (!heartbeatInterval) {\n                    // no heartbeat\n                    return;\n                }\n\n                pomelo.emit('heartbeat recv');\n\n                var obj = Package.encode(Package.TYPE_HEARTBEAT);\n                if (heartbeatTimeoutId) {\n                    clearTimeout(heartbeatTimeoutId);\n                    heartbeatTimeoutId = null;\n                }\n\n                if (heartbeatId) {\n                    // already in a heartbeat interval\n                    return;\n                }\n\n                heartbeatId = setTimeout(function () {\n                    heartbeatId = null;\n                    send(obj);\n\n                    nextHeartbeatTimeout = Date.now() + heartbeatTimeout;\n                    heartbeatTimeoutId = setTimeout(heartbeatTimeoutCb, heartbeatTimeout);\n                }, heartbeatInterval);\n            };\n\n            var heartbeatTimeoutCb = function () {\n                var gap = nextHeartbeatTimeout - Date.now();\n                if (gap > gapThreshold) {\n                    heartbeatTimeoutId = setTimeout(heartbeatTimeoutCb, gap);\n                } else {\n                    console.warn('server heartbeat timeout');\n                    pomelo.emit('heartbeat timeout');\n                    pomelo.disconnect();\n                }\n            };\n\n            var handshake = function (data) {\n                data = JSON.parse(Protocol.strdecode(data));\n                if (data.code === RES_OLD_CLIENT) {\n                    pomelo.emit('error', 'client version not fullfill');\n                    return;\n                }\n\n                if (data.code !== RES_OK) {\n                    pomelo.emit('error', 'handshake fail');\n                    return;\n                }\n\n                handshakeInit(data);\n\n                var obj = Package.encode(Package.TYPE_HANDSHAKE_ACK);\n                send(obj);\n                if (initCallback) {\n                    initCallback(socket);\n                    initCallback = null;\n                }\n            };\n\n            var onData = function (data) {\n                //probuff decode\n                var msg = Message.decode(data);\n\n                if (msg.id > 0) {\n                    msg.route = routeMap[msg.id];\n                    delete routeMap[msg.id];\n                    if (!msg.route) {\n                        return;\n                    }\n                }\n\n                msg.body = deCompose(msg);\n\n                processMessage(pomelo, msg);\n            };\n\n            var onKick = function (data) {\n                var info = JSON.parse(Protocol.strdecode(data));\n\n                var reason = \"kick\";\n                if (info.hasOwnProperty(\"reason\")) {\n                    reason = info[\"reason\"];\n                }\n\n                pomelo.emit('onKick', reason);\n            };\n\n            handlers[Package.TYPE_HANDSHAKE] = handshake;\n            handlers[Package.TYPE_HEARTBEAT] = heartbeat;\n            handlers[Package.TYPE_DATA] = onData;\n            handlers[Package.TYPE_KICK] = onKick;\n\n            var processPackage = function (msg) {\n                handlers[msg.type](msg.body);\n            };\n\n            var processMessage = function (pomelo, msg) {\n                if (!msg.id) {\n                    // server push message\n                    pomelo.emit(msg.route, msg);\n                    return;\n                }\n\n                //if have a id then find the callback function with the request\n                var cb = callbacks[msg.id];\n\n                delete callbacks[msg.id];\n                if (typeof cb !== 'function') {\n                    return;\n                }\n\n                cb(msg);\n                return;\n            };\n\n            var processMessageBatch = function (pomelo, msgs) {\n                for (var i = 0, l = msgs.length; i < l; i++) {\n                    processMessage(pomelo, msgs[i]);\n                }\n            };\n\n            var deCompose = function (msg) {\n                var protos = !!pomelo.data.protos ? pomelo.data.protos.server : {};\n                var abbrs = pomelo.data.abbrs;\n                var route = msg.route;\n\n                //Decompose route from dict\n                if (msg.compressRoute) {\n                    if (!abbrs[route]) {\n                        return {};\n                    }\n\n                    route = msg.route = abbrs[route];\n                }\n                if (!!protos[route]) {\n                    return protobuf.decode(route, msg.body);\n                } else {\n                    return JSON.parse(Protocol.strdecode(msg.body));\n                }\n\n                return msg;\n            };\n\n            var handshakeInit = function (data) {\n                if (data.sys && data.sys.heartbeat) {\n                    heartbeatInterval = data.sys.heartbeat * 1000;   // heartbeat interval\n                    heartbeatTimeout = heartbeatInterval * 2;        // max heartbeat timeout\n                } else {\n                    heartbeatInterval = 0;\n                    heartbeatTimeout = 0;\n                }\n\n                initData(data);\n\n                if (typeof handshakeCallback === 'function') {\n                    handshakeCallback(data.user);\n                }\n            };\n\n            //Initilize data used in pomelo client\n            var initData = function (data) {\n                if (!data || !data.sys) {\n                    return;\n                }\n                pomelo.data = pomelo.data || {};\n                var dict = data.sys.dict;\n                var protos = data.sys.protos;\n\n                //Init compress dict\n                if (dict) {\n                    pomelo.data.dict = dict;\n                    pomelo.data.abbrs = {};\n\n                    for (var route in dict) {\n                        pomelo.data.abbrs[dict[route]] = route;\n                    }\n                }\n\n                //Init protobuf protos\n                if (protos) {\n                    pomelo.data.protos = {\n                        server: protos.server || {},\n                        client: protos.client || {}\n                    };\n                    if (!!protobuf) {\n                        protobuf.init({encoderProtos: protos.client, decoderProtos: protos.server});\n                    }\n                }\n            };\n\n            module.exports = pomelo;\n        })(this);\n\n    });\n\n    pomeloBuildObj.register(\"boot/index.js\", function (exports, requirePomelo, module) {\n        var Emitter = requirePomelo('emitter');\n        this.EventEmitter = Object.create(Emitter);\n\n        var protocol = requirePomelo('pomelo-protocol');\n        this.Protocol = protocol;\n\n        var protobuf = requirePomelo('pomelo-protobuf');\n        this.protobuf = protobuf;\n\n        var pomelo = requirePomelo('pomelo-jsclient-websocket');\n        this.pomelo = pomelo;\n\n    });\n    pomeloBuildObj.alias(\"boot/index.js\", \"pomelo-client/deps/boot/index.js\");\n    pomeloBuildObj.alias(\"component-emitter/index.js\", \"boot/deps/emitter/index.js\");\n    pomeloBuildObj.alias(\"component-indexof/index.js\", \"component-emitter/deps/indexof/index.js\");\n\n    pomeloBuildObj.alias(\"NetEase-pomelo-protocol/lib/protocol.js\", \"boot/deps/pomelo-protocol/lib/protocol.js\");\n    pomeloBuildObj.alias(\"NetEase-pomelo-protocol/lib/protocol.js\", \"boot/deps/pomelo-protocol/index.js\");\n    pomeloBuildObj.alias(\"NetEase-pomelo-protocol/lib/protocol.js\", \"NetEase-pomelo-protocol/index.js\");\n\n    pomeloBuildObj.alias(\"pomelonode-pomelo-protobuf/lib/client/protobuf.js\", \"boot/deps/pomelo-protobuf/lib/client/protobuf.js\");\n    pomeloBuildObj.alias(\"pomelonode-pomelo-protobuf/lib/client/protobuf.js\", \"boot/deps/pomelo-protobuf/index.js\");\n    pomeloBuildObj.alias(\"pomelonode-pomelo-protobuf/lib/client/protobuf.js\", \"pomelonode-pomelo-protobuf/index.js\");\n\n    pomeloBuildObj.alias(\"pomelonode-pomelo-jsclient-websocket/lib/pomelo-client.js\", \"boot/deps/pomelo-jsclient-websocket/lib/pomelo-client.js\");\n    pomeloBuildObj.alias(\"pomelonode-pomelo-jsclient-websocket/lib/pomelo-client.js\", \"boot/deps/pomelo-jsclient-websocket/index.js\");\n    pomeloBuildObj.alias(\"pomelonode-pomelo-jsclient-websocket/lib/pomelo-client.js\", \"pomelonode-pomelo-jsclient-websocket/index.js\");\n\n    pomeloBuildObj.requirePomelo(\"boot\");\n\n    return pomeloBuildObj;\n};\n\nwindow.pomeloBuild = pomeloBuild;\n"]}