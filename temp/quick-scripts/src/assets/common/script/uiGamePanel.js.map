{"version":3,"sources":["../../../../../assets/common/script/assets/common/script/uiGamePanel.js"],"names":["mvs","require","GLB","cc","Class","Component","properties","redFlag","SpriteFrame","blueFlag","redArrow","blueArrow","onLoad","leftBgSprite","node","getChildByName","getComponent","Sprite","blueBgSprite","timeNode","timeLeftNode","timeRightNode","timeLeftTxt","timeRightTxt","leftArrowSprite","rightArrowSprite","timeLeftNumNode","timeRightNumNode","readyNode","timeNumNode","timeNumLabel","Label","timeAnim","Animation","readyAnim","on","gameStart","selfIcon","rivalIcon","clientEvent","eventType","updateTime","countTime","changeFlag","roundStart","gameOver","stopTimeWarnAnim","readyGoAudio","AudioSource","setPicture","redFlagUrl","url","raw","blueFlagUrl","redArrowUrl","blueArrowUrl","setHeadIcon","setData","id","playerUserIds","setTimeNumFont","clearInterval","interval","fontSize","console","log","timeLabelInit","playerFlag","PLAYER_FLAG","RED","user","init","headColorInit","dispatch","getMap","playReadyGo","play","playTimeWarnAnim","stop","active","string","setScale","Game","GameManager","gameState","GameState","Play","isRoomOwner","uiFunc","openUI","panel","uiRoundTip","ROUND_TIP","SELF","leftSprite","rightSprite","spriteFrame","exit","time","countDownEvent","setInterval","winFlag","BLUE","msg","action","GAME_OVER_EVENT","sendEvent","bind","COUNT_TIME","flag","sendEventEx","getTurn","isMyTurn","preTurn","showCurTurnLabel","param","side","onDestroy","off"],"mappings":"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","sourceRoot":"../../../../../assets/common/script","sourcesContent":["var mvs = require(\"Matchvs\");\nvar GLB = require(\"Glb\");\n\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        redFlag: cc.SpriteFrame,\n        blueFlag: cc.SpriteFrame,\n        redArrow: cc.SpriteFrame,\n        blueArrow: cc.SpriteFrame\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        // this.setPicture();\n        // this.leftBgSprite = this.node.getChildByName('bgImg').getChildByName('colorImg').getChildByName('left').getComponent(cc.Sprite);\n        // this.blueBgSprite = this.node.getChildByName('bgImg').getChildByName('colorImg').getChildByName('right').getComponent(cc.Sprite);\n        this.leftBgSprite = this.node.getChildByName('headImg').getChildByName('imgBgLeft').getComponent(cc.Sprite);\n        this.blueBgSprite = this.node.getChildByName('headImg').getChildByName('imgBgRight').getComponent(cc.Sprite);\n        this.timeNode = this.node.getChildByName('time');\n        this.timeLeftNode = this.timeNode.getChildByName('left');\n        this.timeRightNode = this.timeNode.getChildByName('right');\n        this.timeLeftTxt = this.node.getChildByName('leftTimeTxt');\n        this.timeRightTxt = this.node.getChildByName('rightTimeTxt');\n        this.leftArrowSprite = this.timeLeftNode.getChildByName('jiantou').getComponent(cc.Sprite);\n        this.rightArrowSprite = this.timeRightNode.getChildByName('jiantou').getComponent(cc.Sprite);\n        this.timeLeftNumNode = this.timeNode.getChildByName('leftTimeNum');\n        this.timeRightNumNode = this.timeNode.getChildByName('rightTimeNum');\n        this.readyNode = this.node.getChildByName('readyGo');\n        this.timeNumNode = this.timeNode.getChildByName('num');\n        this.timeNumLabel = this.timeNumNode.getComponent(cc.Label);\n        this.timeAnim = this.timeNumNode.getComponent(cc.Animation);\n        this.readyAnim = this.readyNode.getComponent(cc.Animation);\n        this.readyAnim.on('finished', this.gameStart, this);\n        this.selfIcon = this.node.getChildByName('headImg').getChildByName('leftImgMask').getChildByName('leftImg');\n        this.rivalIcon = this.node.getChildByName('headImg').getChildByName('rightImgMask').getChildByName('rightImg');\n        clientEvent.on(clientEvent.eventType.updateTime, this.updateTime, this);\n        clientEvent.on(clientEvent.eventType.countTime, this.countTime, this);\n        clientEvent.on(clientEvent.eventType.changeFlag, this.changeFlag, this);\n        clientEvent.on(clientEvent.eventType.roundStart, this.roundStart, this);\n        clientEvent.on(clientEvent.eventType.gameOver, this.gameOver, this);\n        clientEvent.on(clientEvent.eventType.stopTimeWarnAnim, this.stopTimeWarnAnim, this);\n        this.readyGoAudio = this.readyNode.getComponent(cc.AudioSource);\n    },\n\n    setPicture () {\n         var redFlagUrl = cc.url.raw(\"resources/picture/animal/\" + \"redHead\" + \".png\");\n         this.redFlag = new cc.SpriteFrame(redFlagUrl);\n         var blueFlagUrl = cc.url.raw(\"resources/picture/animal/\" + \"blueHead\" + \".png\");\n         this.blueFlag = new cc.SpriteFrame(blueFlagUrl);\n         var redArrowUrl = cc.url.raw(\"resources/picture/animal/\" + \"redTime\" + \".png\");\n         this.redArrow = new cc.SpriteFrame(redArrowUrl);\n         var blueArrowUrl = cc.url.raw(\"resources/picture/animal/\" + \"blueTime\" + \".png\");\n         this.blueArrow = new cc.SpriteFrame(blueArrowUrl);\n    },\n\n    setHeadIcon () {\n        this.selfIcon.getComponent('playerIcon').setData({id: GLB.playerUserIds[0]});\n        this.rivalIcon.getComponent('playerIcon').setData({id: GLB.playerUserIds[1]});\n    },\n\n    gameOver () {\n        this.stopTimeWarnAnim();\n        this.setTimeNumFont();\n        clearInterval(this.interval);\n    },\n\n    setTimeNumFont () {\n        this.timeNumLabel.fontSize = 35;\n    },\n\n    roundStart () {\n        console.log('------roundStart------')\n        this.timeLabelInit();\n        clearInterval(this.interval);\n        this.playerFlag = GLB.PLAYER_FLAG.RED;\n        // this.getTurn(this.playerFlag);\n        user.init();\n        this.headColorInit();\n        clientEvent.dispatch(clientEvent.eventType.getMap);\n        this.playReadyGo();\n        this.setTimeNumFont();\n        this.setHeadIcon();\n    },\n\n    playReadyGo() {\n        this.readyAnim.play();\n        this.readyGoAudio.play();\n    },\n\n    playTimeWarnAnim () {\n        // TODO 初始化当前的状态；\n        this.timeAnim.play();\n    },\n\n    stopTimeWarnAnim () {\n        this.timeAnim.stop();\n    },\n\n    timeLabelInit () {\n        this.timeNode.active = false;\n        this.timeNumLabel.string = 30;\n        this.timeNode.getChildByName('num').setScale(1,1);\n    },\n\n    gameStart () {\n\n        // this.timeLabelInit();\n        Game.GameManager.gameState = GameState.Play;\n        this.countTime();\n        if (GLB.isRoomOwner) {\n            uiFunc.openUI('uiRoundTip', function (panel) {\n                var uiRoundTip = panel.getComponent('uiRoundTip');\n                uiRoundTip.setData(GLB.ROUND_TIP.SELF);\n            })\n        }\n    },\n\n    headColorInit () {\n        // 主机为红色方；\n        var leftSprite,rightSprite;\n        if (GLB.isRoomOwner) {\n            leftSprite = this.redFlag;\n            rightSprite = this.blueFlag;\n            this.leftArrowSprite.spriteFrame = this.redArrow;\n            this.rightArrowSprite.spriteFrame = this.blueArrow;\n        } else {\n            leftSprite = this.blueFlag;\n            rightSprite = this.redFlag;\n            this.leftArrowSprite.spriteFrame = this.blueArrow;\n            this.rightArrowSprite.spriteFrame = this.redArrow;\n        }\n        this.leftBgSprite.spriteFrame = leftSprite;\n        this.blueBgSprite.spriteFrame = rightSprite;\n    },\n\n    exit() {\n        uiFunc.openUI(\"uiExit\");\n    },\n\n    countTime () {\n        clearInterval(this.interval);\n        if (!GLB.isRoomOwner || Game.GameManager.gameState !== GameState.Play) return;\n        this.time = 30;\n        this.countDownEvent();\n        this.interval = setInterval(function() {\n            this.time--;\n            this.countDownEvent();\n            if (this.time <= 0) {\n                if (Game.GameManager.gameState === GameState.Play) {\n                    console.log('超时；获胜方====' + (this.playerFlag === GLB.PLAYER_FLAG.RED ? '蓝色':'红色'));\n                    var winFlag = this.playerFlag === GLB.PLAYER_FLAG.RED ? GLB.PLAYER_FLAG.BLUE : GLB.PLAYER_FLAG.RED\n                    // Game.GameManager.gameState = GameState.Over;\n                    var msg = {\n                        action: GLB.GAME_OVER_EVENT,\n                        winFlag: winFlag\n                    }\n                    Game.GameManager.sendEvent(msg);\n                    clientEvent.dispatch(clientEvent.eventType.gameOver, winFlag);\n                }\n                clearInterval(this.interval);\n                this.interval = null;\n\n            }\n        }.bind(this), 1000);\n    },\n\n    countDownEvent () {\n        var msg = {action: GLB.COUNT_TIME, flag: this.playerFlag, time: this.time};\n        Game.GameManager.sendEventEx(msg);\n    },\n\n    changeFlag () {\n        this.playerFlag === GLB.PLAYER_FLAG.RED ? this.playerFlag = GLB.PLAYER_FLAG.BLUE :this.playerFlag = GLB.PLAYER_FLAG.RED;\n        this.getTurn(this.playerFlag);\n        if (user.isMyTurn) {\n            uiFunc.openUI('uiRoundTip', function (panel) {\n                var uiRoundTip = panel.getComponent('uiRoundTip');\n                uiRoundTip.setData(GLB.ROUND_TIP.SELF);\n            })\n        }\n        this.countTime();\n    },\n\n    getTurn (flag) {\n        // var flag = this.playerFlag;\n        var preTurn = user.isMyTurn;\n        if(GLB.isRoomOwner && flag === GLB.PLAYER_FLAG.RED) {\n            user.isMyTurn = true;\n        } else if(!GLB.isRoomOwner && flag === GLB.PLAYER_FLAG.BLUE){\n            user.isMyTurn = true;\n        } else {\n            user.isMyTurn = false;\n        }\n        if (preTurn === user.isMyTurn) return;\n        this.showCurTurnLabel();\n        this.timeNode.active = true;\n    },\n\n    showCurTurnLabel () {\n        if (user.isMyTurn) {\n            this.timeLeftNode.active = true;\n            // this.timeLeftNumNode.active = true;\n            this.timeRightNode.active = false;\n            // this.timeRightNumNode.active = false;\n        } else {\n            this.timeLeftNode.active = false;\n            // this.timeLeftNumNode.active = false;\n            this.timeRightNode.active = true;\n           // this.timeRightNumNode.active = true;\n        }\n    },\n\n    updateTime (param) {\n        // if (Game.GameManager.gameState !== GameState.Play) return;\n        var side = null;\n        var time = param.time;\n        if (time <= 5 && time > 0) {\n            this.playTimeWarnAnim();\n        }\n        if (time <= 0) {\n            this.stopTimeWarnAnim();\n        }\n        this.getTurn(param.flag);\n        user.isMyTurn ? side = 'Left' : side = 'Right';\n        // var curNode = this['time' + side + 'NumNode'];\n        // var label = curNode.getComponent(cc.Label);\n        // label.string = time;\n        this.timeNumLabel.string = time;\n    },\n\n    onDestroy () {\n        console.log('uiGamePanel onDestroy');\n        clearInterval(this.interval);\n        clientEvent.off(clientEvent.eventType.updateTime, this.updateTime, this);\n        clientEvent.off(clientEvent.eventType.countTime, this.countTime, this);\n        clientEvent.off(clientEvent.eventType.changeFlag, this.changeFlag, this);\n        clientEvent.off(clientEvent.eventType.roundStart, this.roundStart, this);\n        clientEvent.off(clientEvent.eventType.gameOver, this.gameOver, this);\n        clientEvent.off(clientEvent.eventType.stopTimeWarnAnim, this.stopTimeWarnAnim, this);\n    }\n    // update (dt) {},\n});\n"]}