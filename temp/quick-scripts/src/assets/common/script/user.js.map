{"version":3,"sources":["../../../../../assets/common/script/assets/common/script/user.js"],"names":["GLB","require","window","user","init","stepNoEat","allOpenNum","allEatNum","isMyTurn","stepIfEatOrOpen","isEatOrOpen","isSelf","needStepNoEat","setTimeout","setAudio","console","log","msg","action","GAME_OVER_EVENT","winFlag","Game","GameManager","sendEventEx","bind","name","url","cc","raw","audioEngine","play"],"mappings":";;;;;;AAAA,IAAIA,GAAG,GAAGC,OAAO,CAAC,KAAD,CAAjB;;AACAC,MAAM,CAACC,IAAP,GAAc,EAAd;;AAIAA,IAAI,CAACC,IAAL,GAAY,YAAY;AACpBD,EAAAA,IAAI,CAACE,SAAL,GAAiB,CAAjB;AACAF,EAAAA,IAAI,CAACG,UAAL,GAAkB,CAAlB;AACAH,EAAAA,IAAI,CAACI,SAAL,GAAiB,CAAjB;AACAJ,EAAAA,IAAI,CAACK,QAAL,GAAgB,IAAhB;AACH,CALD,EAOA;;;AACAL,IAAI,CAACM,eAAL,GAAuB,UAASC,WAAT,EAAsBC,MAAtB,EAA8B;AACjD,MAAID,WAAW,KAAK,CAApB,EAAuB;AACnB,SAAKL,SAAL,GAAiB,CAAjB;AACA,SAAKE,SAAL;AACA;AACH,GAJD,MAIO,IAAIG,WAAW,KAAK,CAApB,EAAsB;AACzB,SAAKL,SAAL,GAAiB,CAAjB;AACA,SAAKC,UAAL;AACA;AACH,GAJM,MAIA,IAAII,WAAW,KAAK,CAApB,EAAsB;AACzB,SAAKL,SAAL;AACH;;AAED,MAAI,KAAKA,SAAL,IAAkBL,GAAG,CAACY,aAA1B,EAAyC;AACrC;AACA,QAAI,KAAKN,UAAL,GAAkB,EAAtB,EAA0B;AAAC;AACvB,WAAKD,SAAL,GAAiB,CAAjB;AACA;AACH;;AAED,QAAI,KAAKE,SAAL,GAAiB,EAArB,EAAyB;AAAC;AACtB,WAAKF,SAAL,GAAiB,CAAjB;AACA;AACH;;AAED,QAAIM,MAAJ,EAAY;AACRE,MAAAA,UAAU,CAAC,YAAW;AAClB,aAAKC,QAAL,CAAc,MAAd;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACA,YAAIC,GAAG,GAAG;AACNC,UAAAA,MAAM,EAAElB,GAAG,CAACmB,eADN;AAENC,UAAAA,OAAO,EAAE;AAFH,SAAV;AAIAC,QAAAA,IAAI,CAACC,WAAL,CAAiBC,WAAjB,CAA6BN,GAA7B;AACH,OARU,CAQTO,IARS,CAQJ,IARI,CAAD,EAQI,GARJ,CAAV;AASH;AACJ;AACJ,CArCD;;AAuCArB,IAAI,CAACW,QAAL,GAAgB,UAASW,IAAT,EAAe;AAC3B,MAAIC,GAAG,GAAGC,EAAE,CAACD,GAAH,CAAOE,GAAP,CAAW,qBAAmBH,IAAnB,GAAwB,MAAnC,CAAV;AACAE,EAAAA,EAAE,CAACE,WAAH,CAAeC,IAAf,CAAoBJ,GAApB,EAAyB,KAAzB,EAAgC,CAAhC;AACH,CAHD","sourceRoot":"../../../../../assets/common/script","sourcesContent":["var GLB = require(\"Glb\");\nwindow.user = {\n\n}\n\nuser.init = function () {\n    user.stepNoEat = 0;\n    user.allOpenNum = 0;\n    user.allEatNum = 0;\n    user.isMyTurn = null;\n};\n\n// 1：吃，2：翻，3：空\nuser.stepIfEatOrOpen = function(isEatOrOpen, isSelf) {\n    if (isEatOrOpen === 1) {\n        this.stepNoEat = 0;\n        this.allEatNum++;\n        return;\n    } else if (isEatOrOpen === 2){\n        this.stepNoEat = 0;\n        this.allOpenNum++;\n        return;\n    } else if (isEatOrOpen === 3){\n        this.stepNoEat++;\n    }\n\n    if (this.stepNoEat >= GLB.needStepNoEat) {\n        // 判断是否符合条件 棋子全开，小于等于4个子\n        if (this.allOpenNum < 16) {// 全开\n            this.stepNoEat = 0;\n            return;\n        }\n\n        if (this.allEatNum < 12) {// 小于等于4个子\n            this.stepNoEat = 0;\n            return;\n        }\n\n        if (isSelf) {\n            setTimeout(function() {\n                this.setAudio(\"draw\");\n                console.log(\"12步未吃\");\n                var msg = {\n                    action: GLB.GAME_OVER_EVENT,\n                    winFlag: null\n                }\n                Game.GameManager.sendEventEx(msg);\n            }.bind(this), 700);\n        }\n    }\n};\n\nuser.setAudio = function(name) {\n    var url = cc.url.raw(\"resources/sound/\"+name+\".mp3\");\n    cc.audioEngine.play(url, false, 1);\n};"]}