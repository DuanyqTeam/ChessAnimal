{"version":3,"sources":["../../../../../assets/common/lobby/assets/common/lobby/resultPlayerIcon.js"],"names":["cc","Class","Component","properties","icon","type","Sprite","nameLb","Label","setData","id","playerId","clientEvent","on","eventType","playerAccountGet","userInfoSet","Game","GameManager","userInfoReq","recvMsg","account","string","userName","headIcon","loader","load","url","err","texture","spriteFrame","SpriteFrame","Rect","width","height","bind","onDestroy","off"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,IAAI,EAAE;AACF,iBAAS,IADP;AAEFC,MAAAA,IAAI,EAAEL,EAAE,CAACM;AAFP,KADE;AAMRC,IAAAA,MAAM,EAAE;AACJ,iBAAS,IADL;AAEJF,MAAAA,IAAI,EAAEL,EAAE,CAACQ;AAFL;AANA,GAHP;AAeLC,EAAAA,OAAO,EAAE,iBAASC,EAAT,EAAa;AAClB,SAAKC,QAAL,GAAgBD,EAAhB;AACAE,IAAAA,WAAW,CAACC,EAAZ,CAAeD,WAAW,CAACE,SAAZ,CAAsBC,gBAArC,EAAuD,KAAKC,WAA5D,EAAyE,IAAzE;AACAC,IAAAA,IAAI,CAACC,WAAL,CAAiBC,WAAjB,CAA6B,KAAKR,QAAlC;AACH,GAnBI;AAqBLK,EAAAA,WAAW,EAAE,qBAASI,OAAT,EAAkB;AAC3B,QAAIA,OAAO,CAACC,OAAR,IAAmB,KAAKV,QAA5B,EAAsC;AAClC,WAAKJ,MAAL,CAAYe,MAAZ,GAAqBF,OAAO,CAACG,QAA7B;;AACA,UAAIH,OAAO,CAACI,QAAR,IAAoBJ,OAAO,CAACI,QAAR,KAAqB,GAA7C,EAAkD;AAC9CxB,QAAAA,EAAE,CAACyB,MAAH,CAAUC,IAAV,CAAe;AAACC,UAAAA,GAAG,EAAEP,OAAO,CAACI,QAAd;AAAwBnB,UAAAA,IAAI,EAAE;AAA9B,SAAf,EAAqD,UAASuB,GAAT,EAAcC,OAAd,EAAuB;AACxE,cAAIC,WAAW,GAAG,IAAI9B,EAAE,CAAC+B,WAAP,CAAmBF,OAAnB,EAA4B7B,EAAE,CAACgC,IAAH,CAAQ,CAAR,EAAW,CAAX,EAAcH,OAAO,CAACI,KAAtB,EAA6BJ,OAAO,CAACK,MAArC,CAA5B,CAAlB;;AACA,cAAG,KAAK9B,IAAR,EAAc;AACV,iBAAKA,IAAL,CAAU0B,WAAV,GAAwBA,WAAxB;AACH;AACJ,SALoD,CAKnDK,IALmD,CAK9C,IAL8C,CAArD;AAMH;AACJ;AACJ,GAjCI;AAmCLC,EAAAA,SAnCK,uBAmCO;AACRxB,IAAAA,WAAW,CAACyB,GAAZ,CAAgBzB,WAAW,CAACE,SAAZ,CAAsBC,gBAAtC,EAAwD,KAAKC,WAA7D,EAA0E,IAA1E;AACH;AArCI,CAAT","sourceRoot":"../../../../../assets/common/lobby","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        icon: {\n            default: null,\n            type: cc.Sprite\n        },\n\n        nameLb: {\n            default: null,\n            type: cc.Label\n        }\n    },\n\n    setData: function(id) {\n        this.playerId = id;\n        clientEvent.on(clientEvent.eventType.playerAccountGet, this.userInfoSet, this);\n        Game.GameManager.userInfoReq(this.playerId);\n    },\n\n    userInfoSet: function(recvMsg) {\n        if (recvMsg.account == this.playerId) {\n            this.nameLb.string = recvMsg.userName;\n            if (recvMsg.headIcon && recvMsg.headIcon !== \"-\") {\n                cc.loader.load({url: recvMsg.headIcon, type: 'png'}, function(err, texture) {\n                    var spriteFrame = new cc.SpriteFrame(texture, cc.Rect(0, 0, texture.width, texture.height));\n                    if(this.icon) {\n                        this.icon.spriteFrame = spriteFrame;\n                    }\n                }.bind(this));\n            }\n        }\n    },\n\n    onDestroy() {\n        clientEvent.off(clientEvent.eventType.playerAccountGet, this.userInfoSet, this);\n    },\n\n});\n"]}