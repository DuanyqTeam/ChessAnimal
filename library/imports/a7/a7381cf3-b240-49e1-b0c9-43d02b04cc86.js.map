{"version":3,"sources":["../../../../../assets/common/script/assets/common/script/uiExit.js"],"names":["uiPanel","require","mvs","GLB","cc","Class","properties","onLoad","_super","nodeDict","on","sure","close","uiFunc","closeUI","node","name","destroy","Game","GameManager","gameState","GameState","Over","msg","action","EXIT","sendEvent","clientEvent","dispatch","eventType","gameOver","gamePanel","findUI","engine","leaveRoom","isLoadGame","lobbyShow"],"mappings":";;;;;;AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,GAAG,GAAGD,OAAO,CAAC,SAAD,CAAjB;;AACA,IAAIE,GAAG,GAAGF,OAAO,CAAC,KAAD,CAAjB;;AACAG,EAAE,CAACC,KAAH,CAAS;AACL,aAASL,OADJ;AAELM,EAAAA,UAAU,EAAE,EAFP;AAILC,EAAAA,MAJK,oBAII;AACL,SAAKC,MAAL;;AACA,SAAKC,QAAL,CAAc,MAAd,EAAsBC,EAAtB,CAAyB,OAAzB,EAAkC,KAAKC,IAAvC,EAA6C,IAA7C;AACA,SAAKF,QAAL,CAAc,OAAd,EAAuBC,EAAvB,CAA0B,OAA1B,EAAmC,KAAKE,KAAxC,EAA+C,IAA/C;AACH,GARI;AAULA,EAAAA,KAVK,mBAUG;AACJC,IAAAA,MAAM,CAACC,OAAP,CAAe,KAAKC,IAAL,CAAUC,IAAzB;AACA,SAAKD,IAAL,CAAUE,OAAV;AACH,GAbI;AAeLN,EAAAA,IAfK,kBAeE;AAEH;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEAO,IAAAA,IAAI,CAACC,WAAL,CAAiBC,SAAjB,GAA6BC,SAAS,CAACC,IAAvC;AACA,QAAIC,GAAG,GAAG;AACNC,MAAAA,MAAM,EAAErB,GAAG,CAACsB;AADN,KAAV;AAGAP,IAAAA,IAAI,CAACC,WAAL,CAAiBO,SAAjB,CAA2BH,GAA3B,EAnBG,CAoBH;;AACAI,IAAAA,WAAW,CAACC,QAAZ,CAAqBD,WAAW,CAACE,SAAZ,CAAsBC,QAA3C,EArBG,CAuBH;;AACA,QAAIC,SAAS,GAAGlB,MAAM,CAACmB,MAAP,CAAc,aAAd,CAAhB;;AACA,QAAID,SAAJ,EAAe;AACXlB,MAAAA,MAAM,CAACC,OAAP,CAAe,aAAf;AACAiB,MAAAA,SAAS,CAACd,OAAV;AACH;;AACDf,IAAAA,GAAG,CAAC+B,MAAJ,CAAWC,SAAX,CAAqB,EAArB;AACAhB,IAAAA,IAAI,CAACC,WAAL,CAAiBgB,UAAjB,GAA8B,KAA9B;AACAjB,IAAAA,IAAI,CAACC,WAAL,CAAiBiB,SAAjB;AACAvB,IAAAA,MAAM,CAACC,OAAP,CAAe,KAAKC,IAAL,CAAUC,IAAzB;AACA,SAAKD,IAAL,CAAUE,OAAV;AAEH;AAlDI,CAAT","sourceRoot":"../../../../../assets/common/script","sourcesContent":["var uiPanel = require(\"uiPanel\");\nvar mvs = require(\"Matchvs\");\nvar GLB = require(\"Glb\");\ncc.Class({\n    extends: uiPanel,\n    properties: {},\n\n    onLoad() {\n        this._super();\n        this.nodeDict[\"sure\"].on(\"click\", this.sure, this);\n        this.nodeDict[\"close\"].on(\"click\", this.close, this);\n    },\n\n    close() {\n        uiFunc.closeUI(this.node.name);\n        this.node.destroy();\n    },\n\n    sure() {\n\n        // var winFlag;\n        // if (GLB.isRoomOwner) {\n        //     winFlag = GLB.PLAYER_FLAG.BLUE;\n        // } else {\n        //     winFlag = GLB.PLAYER_FLAG.RED;\n        // }\n\n        // var msg = {\n        //     action: GLB.GAME_OVER_EVENT,\n        //     winFlag: winFlag\n        // }\n        // Game.GameManager.sendEvent(msg);\n\n        Game.GameManager.gameState = GameState.Over;\n        var msg = {\n            action: GLB.EXIT\n        }\n        Game.GameManager.sendEvent(msg);\n        // 不进入结算页面，进入大厅\n        clientEvent.dispatch(clientEvent.eventType.gameOver);\n\n        // 这里不先close就会destroy\n        var gamePanel = uiFunc.findUI(\"uiGamePanel\");\n        if (gamePanel) {\n            uiFunc.closeUI(\"uiGamePanel\");\n            gamePanel.destroy();\n        }\n        mvs.engine.leaveRoom(\"\");\n        Game.GameManager.isLoadGame = false;\n        Game.GameManager.lobbyShow();\n        uiFunc.closeUI(this.node.name);\n        this.node.destroy();\n\n    }\n});\n"]}